<div class="favorites-page">
  <div class="container">
    <div class="favorites-header">
      <h1>Mis Favoritos</h1>
      <p class="subtitle" *ngIf="favorites.length > 0">Tienes {{ favorites.length }} libros en tu lista de deseos</p>
      <a routerLink="/home" class="btn-back">‚Üê Volver a la tienda</a>
    </div>

    <!-- Empty State -->
    <div class="empty-favorites" *ngIf="favorites.length === 0">
      <div class="empty-icon">üìÇ</div>
      <h2>Tu lista est√° vac√≠a</h2>
      <p>A√∫n no has agregado ning√∫n libro a tus favoritos.</p>
      <button class="btn-primary" routerLink="/home">Explorar Tienda</button>
    </div>

    <!-- Favorites Grid -->
    <div class="favorites-grid" *ngIf="favorites.length > 0">
      <div class="product-card" *ngFor="let book of favorites">
        <div class="product-image">
          <span class="badge-discount" *ngIf="book.discount">-{{ book.discount }}%</span>
          <div class="product-actions">
            <button class="btn-icon btn-favorite active" (click)="removeFavorite(book.id)" aria-label="Quitar de favoritos">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
              </svg>
            </button>
          </div>
          <img [src]="book.image" [alt]="book.title" [routerLink]="['/product', book.id]" style="cursor: pointer;" />
        </div>
        <div class="product-info">
          <h3 class="product-title" [routerLink]="['/product', book.id]" style="cursor: pointer;">{{ book.title }}</h3>
          <div class="product-pricing">
            <span class="price-original" *ngIf="book.originalPrice">{{ formatPrice(book.originalPrice) }}</span>
            <span class="price-current">{{ formatPrice(book.price) }}</span>
          </div>
          <button 
            class="btn-add-cart-full" 
            [class.active]="isInCart(book.id)"
            (click)="addToCart(book)"
          >
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="9" cy="21" r="1"></circle>
              <circle cx="20" cy="21" r="1"></circle>
              <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
            </svg>
            {{ isInCart(book.id) ? 'En el Carrito' : 'Agregar al Carrito' }}
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
