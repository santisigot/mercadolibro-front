<div class="listing-page">
  <div class="container">
    <div class="listing-header">
      <nav class="breadcrumb">
        <a routerLink="/home">Inicio</a>
        <span class="separator">/</span>
        <span class="active">{{ title }}</span>
      </nav>
      <h1>{{ title }}</h1>
      <p class="subtitle" *ngIf="books.length > 0">Explora nuestra selección completa de {{ title.toLowerCase() }}</p>
    </div>

    <!-- Products Grid -->
    <div class="products-grid" *ngIf="books.length > 0">
      <div class="product-card" *ngFor="let book of books">
        <div class="product-image">
          <span class="badge-discount" *ngIf="book.discount">-{{ book.discount }}%</span>
          <div class="product-actions">
            <button 
              class="btn-icon btn-favorite" 
              [class.active]="isFavorite(book.id)"
              (click)="toggleFavorite(book)"
              aria-label="Agregar a favoritos"
            >
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
              </svg>
            </button>
            <button 
              class="btn-icon btn-add-to-cart" 
              [class.active]="isInCart(book.id)"
              (click)="addToCart(book)" 
              aria-label="Agregar al carrito"
            >
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="9" cy="21" r="1"></circle>
                <circle cx="20" cy="21" r="1"></circle>
                <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
              </svg>
            </button>
          </div>
          <img [src]="book.image" [alt]="book.title" [routerLink]="['/product', book.id]" style="cursor: pointer;" />
        </div>
        <div class="product-info">
          <h3 class="product-title" [routerLink]="['/product', book.id]" style="cursor: pointer;">{{ book.title }}</h3>
          <p class="product-author" *ngIf="book.author">{{ book.author }}</p>
          <div class="product-pricing">
            <span class="price-original" *ngIf="book.originalPrice">{{ formatPrice(book.originalPrice) }}</span>
            <span class="price-current">{{ formatPrice(book.price) }}</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Empty State (just in case) -->
    <div class="empty-state" *ngIf="books.length === 0">
      <h2>No se encontraron libros en esta sección</h2>
      <button class="btn-primary" routerLink="/home">Volver al Inicio</button>
    </div>
  </div>
</div>
