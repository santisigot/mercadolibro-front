<div class="crud-container">
  <div class="crud-header">
    <button class="btn-back" (click)="goBack()">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M19 12H5M12 19l-7-7 7-7"/>
      </svg>
      Volver
    </button>
    <h1>Editar Libro</h1>
    <p class="subtitle">Selecciona un libro y modifica su información</p>
  </div>

  <!-- Success Message -->
  <div class="alert alert-success" *ngIf="showSuccess">
    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
      <polyline points="22 4 12 14.01 9 11.01"></polyline>
    </svg>
    ¡Libro actualizado exitosamente!
  </div>

  <div class="form-container">
    <!-- Book Selection -->
    <div class="mb-4 book-selector">
      <label for="bookSelect" class="form-label">Seleccionar Libro *</label>
      <select 
        class="form-select" 
        id="bookSelect" 
        [(ngModel)]="selectedBookId"
        (change)="onBookSelect()"
        name="bookSelect"
      >
        <option [value]="null">-- Selecciona un libro para editar --</option>
        <option *ngFor="let book of books" [value]="book.id">
          {{ book.nombre }} ({{ book.isbn }})
        </option>
      </select>
    </div>

    <!-- Edit Form -->
    <form (ngSubmit)="onSubmit()" #updateForm="ngForm" *ngIf="selectedBookId">
      <div class="form-divider"></div>
      
      <!-- ISBN -->
      <div class="mb-3">
        <label for="isbn" class="form-label">ISBN *</label>
        <input 
          type="text" 
          class="form-control" 
          id="isbn" 
          name="isbn"
          [(ngModel)]="isbn"
          required
        >
      </div>

      <!-- Nombre -->
      <div class="mb-3">
        <label for="nombre" class="form-label">Nombre del Libro *</label>
        <input 
          type="text" 
          class="form-control" 
          id="nombre" 
          name="nombre"
          [(ngModel)]="nombre"
          required
        >
      </div>

      <!-- Editorial -->
      <div class="mb-3">
        <label for="editorial" class="form-label">Editorial *</label>
        <input 
          type="text" 
          class="form-control" 
          id="editorial" 
          name="editorial"
          [(ngModel)]="editorial"
          required
        >
      </div>

      <!-- Idioma -->
      <div class="mb-3">
        <label for="idioma" class="form-label">Idioma *</label>
        <select 
          class="form-select" 
          id="idioma" 
          name="idioma"
          [(ngModel)]="idioma"
          required
        >
          <option *ngFor="let lang of idiomas" [value]="lang">{{ lang }}</option>
        </select>
      </div>

      <!-- Descripción -->
      <div class="mb-3">
        <label for="descripcion" class="form-label">Descripción *</label>
        <textarea 
          class="form-control" 
          id="descripcion" 
          name="descripcion"
          [(ngModel)]="descripcion"
          rows="4"
          required
        ></textarea>
      </div>

      <!-- Buttons -->
      <div class="button-group">
        <button type="submit" class="btn btn-primary" [disabled]="!updateForm.valid">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/>
            <polyline points="17 21 17 13 7 13 7 21"/>
            <polyline points="7 3 7 8 15 8"/>
          </svg>
          Guardar Cambios
        </button>
        <button type="button" class="btn btn-secondary" (click)="goBack()">
          Cancelar
        </button>
      </div>
    </form>

    <!-- Empty State -->
    <div class="empty-selection" *ngIf="!selectedBookId">
      <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
        <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
      </svg>
      <p>Selecciona un libro de la lista para comenzar a editarlo</p>
    </div>
  </div>
</div>
